<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<html>
<head th:replace="layout::common_head(~{::title}, ~{::supplement})">
    <meta charset="UTF-8">
    <title>轮播视图</title>
    <script src="../static/js/jquery-3.2.1.min.js" th:src="@{js/jquery-3.2.1.min.js}"></script>
    <script src="../static/js/semantic.js" th:src="@{js/semantic.js}"></script>
    <link rel="stylesheet" href="../static/css/semantic.css" th:href="@{/css/semantic.css}"/>
    <link rel="stylesheet" href="../static/css/icon.css" th:href="@{css/icon.css}"/>
    <link href="../static/css/ionicons.min.css" rel="stylesheet" th:href="@{css/ionicons.min.css}"/>
    <link href="../static/css/main.css" rel="stylesheet" th:href="@{css/main.css}"/>
    <link href="../static/css/pace.css" rel="stylesheet" th:href="@{css/pace.css}"/>
    <link href="../static/css/lobibox.css" rel="stylesheet" th:href="@{css/lobibox.css}"/>
    <th:block th:fragment="supplement">
        <!--<script src="http://rapapi.org/rap.plugin.js?projectId=19544&mode=3"></script>-->
        <script src="../static/js/echarts.min.js" th:src="@{js/echarts.min.js}"></script>
        <script src="../static/js/jstree.min.js" th:src="@{js/jstree.min.js}"></script>
        <link rel="stylesheet" href="../static/css/jstree-default/style.min.css"
              th:href="@{css/jstree-default/style.min.css}">
        <link rel="stylesheet" type="text/css" href="../static/css/jquery.gridster.css"
              th:href="@{css/jquery.gridster.css}">
        <script src="../static/js/jquery.gridster.js" th:src="@{js/jquery.gridster.js}" type="text/javascript" charset="utf-8"></script>
        <style type="text/css">
            li {background:yellow;}
        </style>
    </th:block>
</head>
<body>
<!--header start-->
<div id="contextWrap">
    <!--sidebar-->
    <div class="ui sidebar vertical left menu overlay  borderless visible sidemenu inverted  grey" data-color="grey"
         th:replace="layout::left_menu">
        <a class="item logo" href="#">
        </a>
        <div class="ui accordion inverted">
            <div class="title item">
                <i class="ion-speedometer titleIcon icon"></i>仪表盘
            </div>
            <div class="content">
                <a class="item" href="#" th:href="@{/dashboard}">仪表盘</a>
            </div>
            <div class="title item" href="#">
                <i class="ion-ios-world titleIcon  icon"></i>业务概览
            </div>
            <div class="content">
            </div>
            <div class="title item">
                <i class="ion-mouse titleIcon icon"></i>设备监控<i class="dropdown icon"></i>
            </div>
            <div class="content">
                <a class="item" href="#" th:href="@{/overview}">设备总览</a>
                <a class="item" href="#">设备详情</a>
            </div>
            <div class="title item" href="#">
                <i class="ion-arrow-graph-up-right titleIcon icon"></i>视图展示
            </div>
            <div class="content">
            </div>
            <div class="title item">
                <i class="ion-paintbrush titleIcon icon"></i>告警展示<i class="dropdown icon"></i>
            </div>
            <div class="content">
                <a class="item" href="#">告警日历</a>
                <a class="item" href="#">告警列表</a>
            </div>
            <div class="title item" href="#">
                <i class="ion-briefcase titleIcon icon"></i>报表统计
            </div>
            <div class="content">
            </div>
        </div>

        <div class="ui dropdown item displaynone scrolling">
            <span>仪表盘1</span>
            <i class="ion-speedometer icon"></i>
            <div class="menu">
                <div class="header">
                    仪表盘1
                </div>
            </div>
        </div>

        <div class="ui dropdown item displaynone scrolling">
            <span>业务概览</span>
            <i class="ion-ios-world icon"></i>
            <div class="menu">
                <div class="header">
                    业务概览
                </div>
            </div>
        </div>

        <div class="ui dropdown item displaynone scrolling">
            <span>设备监控</span>
            <i class="ion-mouse icon"></i>
            <div class="menu">
                <div class="header">
                    设备监控
                </div>
                <div class="ui divider"></div>
                <a class="item" href="tab.html">设备总览</a>
                <a class="item" href="table.html">设备详情</a>
            </div>
        </div>

        <div class="ui dropdown item displaynone scrolling">
            <span>视图展示</span>
            <i class="ion-arrow-graph-up-right icon"></i>
            <div class="menu">
                <div class="header">
                    视图展示
                </div>
            </div>
        </div>

        <div class="ui dropdown item displaynone scrolling">
            <span>告警展示</span>
            <i class="ion-paintbrush icon"></i>
            <div class="menu">
                <div class="header">
                    告警展示
                </div>
                <div class="ui divider"></div>
                <a class="item" href="error.html">告警日历</a>
                <a class="item" href="error.html">告警列表</a>
            </div>
        </div>

        <div class="ui dropdown item displaynone scrolling">
            <span>报表统计</span>
            <a href="error.html">
                <i class="ion-briefcase icon"></i>
            </a>
        </div>

        <div class="ui divider"></div>

    </div>

    <!--sidebar-->

    <div class="pusher">
        <!--navbar-->
        <div class="navslide navwrap" th:replace="layout::top_nav">
            <div class="ui menu icon borderless grid" data-color="inverted white">
                <a class="item labeled openbtn">
                    <i class="ion-navicon-round big icon"></i>
                </a>
                <div class="item ui colhidden">
                    <div class="ui icon input">
                        <input type="text" placeholder="Search...">
                        <i class="search icon"></i>
                    </div>
                </div>
                <div class="right menu colhidden">
                    <div class="ui dropdown item labeled icon">
                        <i class="bell icon"></i> 告警
                        <div class="ui red label mini circular">6</div>
                        <div class="menu">
                            <div class="header">
                                紧急告警
                            </div>
                            <div class="item">
                                告警信息1……
                                <div class="ui teal left pointing label">1</div>
                            </div>
                            <div class="item">
                                告警信息2……
                                <div class="ui label">51</div>
                            </div>
                            <div class="item">
                                告警信息3……
                                <div class="ui label">1</div>
                            </div>
                            <div class="header">
                                严重告警
                            </div>
                            <div class="item">
                                <i class="dropdown icon"></i>
                                <span class="text">更多</span>
                                <div class="menu">
                                    <div class="item">告警信息……</div>
                                    <div class="item">告警信息……</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="ui dropdown item">
                        <img class="ui mini circular image" src="../static/images/0.jpg" th:src="@{images/0.jpg}"
                             alt="label-image"/>
                        <div class="menu">
                            <a class="item" href="#" th:text="${session.userInfo.name}">whstone</a>
                            <a class="item" href="mail.html" th:href="@{/logout}">注销</a>
                        </div>
                    </div>
                    <a class="item labeled rightsidebar computer only">
                        <i class="ion-wrench large icon"></i>工具
                    </a>

                </div>
            </div>
        </div>
        <!--navbar-->
        <!--maincontent-->
        <div class="mainWrap navslide">
            <div class="ui equal width left aligned padded grid stackable">
                <!--Site Content-->
                <div class="sixteen wide column">
                    <div class="header item">
                        <h2><i class="bar large chart icon"></i>轮播视图</h2>
                    </div>
                    <div class="ui grid">
                        <div class="eight wide column"  style="padding-bottom: 0px">
                            <div id="viewgroup_select" class="ui selection dropdown">
                                <i class="dropdown icon"></i>
                                <div class="text">展示组</div>
                                <div class="menu" id="viewgroup_menu">
                                    <div class="disabled item">展示组</div>
                                </div>
                            </div>
                            <div id="viewpage_select" class="ui selection dropdown">
                                <!--<input type="hidden" name="hosts">-->
                                <i class="dropdown icon"></i>
                                <div class="text">展示页</div>
                                <div class="menu"  id="viewpage_menu">
                                    <div class="selected item">默认页面</div>
                                    <div class="item">默认页面1</div>
                                    <div class="item">默认页面2</div>
                                </div>
                            </div>
                        </div>
                        <div class="eight wide column right aligned"  style="padding-bottom: 0px">
                            <button class="ui basic button addpage"><i class="add icon"></i> 添加</button>
                            <button class="ui basic button writepage"><i class="write icon"></i> 修改</button>
                            <button class="ui basic button deletepage"><i class="delete icon"></i> 删除</button>
                            <button class="ui blue button editpage"><i class="edit icon"></i> 编辑</button>
                            <button class="ui blue button refreshpage"><i class="refresh icon"></i> 刷新</button>
                            <button class="ui blue button savepage"><i class="save  icon"></i> 保存</button>
                        </div>
                    </div>

                    <div class="ui segment" style=" min-height : 470px;" >
                        <div class="ui grid">
                            <div class="one wide column">
                                <div style="height: 10px"></div>
                                <button class="ui icon basic massive button addblock " style="box-shadow:0px 0px;border:3px dashed darkgray;width: 70px"><!--// -->
                                    <i class="add icon" style="font-size:200%;padding-top: 10px;padding-right:30px "></i>
                                </button>
                            </div>
                            <div class="fifteen wide column" style="padding-top: 0px">
                                <div class="gridster">
                                    <ul>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!--Site Content-->
            </div>
        </div>
        <!--maincontent-->
        <!--添加展示组弹出框 start-->
        <div class="ui tiny modal page" id="group_modal">
            <i class="close icon"></i>
            <div class="header">
                添加展示组
            </div>
            <div class="ui content  center aligned basic segment no-padding">
                <form class="ui form">
                    <div class="required inline field ">
                        <label>名称</label>
z                    </div>
                    <div class="required inline field">
                        <label>刷新</label>
                        <input type="text" placeholder="刷新频率（分钟）">
                    </div>
                    <div class="required inline field">
                        <label>描述</label>
                        <input type="text" placeholder="不能为空">
                    </div>
                </form>
            </div>
            <div class="actions">
                <div class="ui approve submit button">确认</div>
                <div class="ui cancel button">取消</div>
            </div>
        </div>
        <!--添加展现页弹出框 start-->
        <div class="ui tiny modal page" id="page_modal">
            <i class="close icon"></i>
            <div class="header">所属【展示组】的页面</div>
            <div class="ui content  center aligned basic segment">
                <form class="ui form">
                    <div class="required inline field " id="page_name_field">
                        <label>名称</label>
                        <input type="text" placeholder="不能为空" id="page_name">
                    </div>
                    <!--<div class="inline field">
                        <label>描述</label>
                        <textarea></textarea>
                    </div>-->
                </form>
            </div>
            <div class="actions">
                <div class="ui approve submit button">确认</div>
                <div class="ui cancel button">取消</div>
            </div>
        </div>
        <!--添加展示点类型弹出框 start-->
        <div class="ui tiny modal page" id="point_modal">
            <i class="close icon"></i>
            <div class="header">
                选择视图类型
            </div>
            <div class="ui content  center aligned basic segment no-padding">
                <div class="ui vertical buttons">
                    <button class="ui view button">添加视图</button>
                    <button class="ui group button">添加图表</button>
                    <button class="ui chart button">添加数值</button>
                </div>
            </div>
        </div>
        <!--添加展示项添加视图弹出框 start-->
        <div class="ui tiny modal page" id="point_view_modal">
            <i class="close icon"></i>
            <div class="header">
                添加视图
            </div>
            <div class="ui content  center aligned basic segment no-padding">
                <form class="ui form">
                    <div class="required inline field ">
                        <label>视图类型</label>
                        <div class="ui selection dropdown">
                            <!--<input type="hidden" name="hosts">-->
                            <i class="dropdown icon"></i>
                            <div class="text">状态统计</div>
                            <div class="menu" >
                                <div class="selected item">状态统计</div>
                                <div class="item">问题视图</div>
                            </div>
                        </div>
                    </div>
                    <div class="required inline field ">
                        <label>选择页面</label>
                        <div class="ui selection dropdown">
                            <!--<input type="hidden" name="hosts">-->
                            <i class="dropdown icon"></i>
                            <div class="text">默认页面</div>
                            <div class="menu" >
                                <div class="selected item">默认页面</div>
                                <div class="item">默认页面1</div>
                                <div class="item">默认页面2</div>
                            </div>
                        </div>
                    </div>
                    <div class="inline field">
                        <div class="ui checkbox" style="margin-left: -20px">
                            <input type="checkbox" tabindex="0" class="hidden">
                            <label  id="label_checkbox"><i class="hide icon"></i>显示标题</label>
                        </div>
                    </div>
                </form>
            </div>
            <div class="actions">
                <div class="ui approve submit button">确认</div>
                <div class="ui cancel button">取消</div>
            </div>
        </div>
        <!--添加展示项添加图表弹出框 start-->
        <div class="ui tiny modal page" id="point_group_modal">
            <i class="close icon"></i>
            <div class="ui horizontal segments">
                <div class="ui segment">
                    <p>选择设备</p>
                </div>
                <div class="ui segment no-padding">
                    <div class="ui middle aligned divided list">
                        <div class="item">选择监控点</div>
                        <div class="item">选择监控点</div>
                        <div class="item">选择监控点</div>
                        <div class="item">选择监控点</div>
                    </div>
                </div>
                <div class="ui segment no-padding">
                    <div class="ui middle aligned divided list">
                        <div class="item">选择监控项</div>
                        <div class="item">选择监控项</div>
                        <div class="item">选择监控项</div>
                        <div class="item">选择监控项</div>
                    </div>
                </div>
                <div class="ui segment">
                    <p>选择图形</p>
                </div>
            </div>
            <div class="actions">
                <div class="ui approve submit button">确认</div>
                <div class="ui cancel button">取消</div>
            </div>
        </div>
        <!--添加展示项添加静态数据弹出框 start-->
        <div class="ui tiny modal page" id="point_chart_modal">
            <i class="close icon"></i>
            <div class="header">
                添加静态数据
            </div>
            <div class="ui content  center aligned basic segment no-padding">
                <form class="ui form">
                    <div class="required inline field">
                        <label>图&nbsp&nbsp&nbsp&nbsp形</label>
                        <div class="ui selection dropdown">
                            <!--<input type="hidden" name="hosts">-->
                            <i class="dropdown icon"></i>
                            <div class="text">时钟</div>
                            <div class="menu" >
                                <div class="selected item">时钟</div>
                                <div class="item">表格</div>
                            </div>
                        </div>
                    </div>
                    <div class="required inline field">
                        <label>类&nbsp&nbsp&nbsp&nbsp型</label>
                        <div class="ui selection dropdown">
                            <!--<input type="hidden" name="hosts">-->
                            <i class="dropdown icon"></i>
                            <div class="text">数值</div>
                            <div class="menu" >
                                <div class="selected item">数值</div>
                                <div class="item">钟表</div>
                            </div>
                        </div>
                    </div>
                    <div class="required inline field">
                        <label>名&nbsp&nbsp&nbsp&nbsp称</label>
                        <input type="text" placeholder="不能为空" style="width: 168px;">
                    </div>
                </form>
            </div>
            <div class="actions">
                <div class="ui approve submit button">确认</div>
                <div class="ui cancel button">取消</div>
            </div>
        </div>
        <!--删除页面弹出框 start-->
        <div class="ui tiny modal delete" id="delete_modal">
            <div class="ui icon header">
                <i class="trash icon"></i>
                确定删除本页面吗？
            </div>
            <div class="actions">
                <div class="ui approve submit button" data-tooltip="提示：该操作无法恢复！" data-inverted="">确认</div>
                <div class="ui cancel button">取消</div>
            </div>
        </div>
    </div>
</div>

<th:block th:replace="layout::bottom_script(~{::specialScript})">
    <script src="../static/js/js.cookie.js" th:src="@{js/js.cookie.js}"></script>
    <script src="../static/js/jquery.nicescroll.min.js" th:src="@{js/jquery.nicescroll.min.js}"></script>
    <script data-pace-options='{ "ajax": false }' src="../static/js/pace.js" th:src="@{js/pace.js}"></script>
    <script src="../static/js/main.js" th:src="@{js/main.js}"></script>
    <script src="../static/js/jquery.dataTables.js" th:src="@{js/jquery.dataTables.js}"></script>
    <script src="../static/js/custom-datatable.js" th:src="@{js/custom-datatable.js}"></script>
    <script src="../static/js/assistantTool.js" th:src="@{js/assistantTool.js}"></script>
    <script src="../static/js/custom/choose-hosts.js" th:src="@{js/custom/choose-hosts.js}"></script>

    <script  type="text/javascript">
        var gridster;
        /*var serialization = [
            { col: 1, row: 1, size_x: 2, size_y: 2 },
            { col: 3, row: 1, size_x: 1, size_y: 2 },
            { col: 4, row: 1, size_x: 1, size_y: 1 },
            { col: 2, row: 3, size_x: 3, size_y: 1 },
            { col: 1, row: 4, size_x: 1, size_y: 1 },
            { col: 1, row: 3, size_x: 1, size_y: 1 },
            { col: 2, row: 4, size_x: 1, size_y: 1 },
            { col: 2, row: 5, size_x: 1, size_y: 1 }
        ];
        // sort serialization
        serialization = Gridster.sort_by_row_and_col_asc(serialization);*/

        $(function() {
            gridster = $(".gridster ul").gridster({
                widget_base_dimensions: [100, 100],
                min_cols: 1,
                max_cols: 6,
                resize: {
                    enabled: true,
                    max_size: [4, 4],
                    min_size: [1, 1]
                }
            }).data('gridster');
            //初始化两下拉框
            //初始化默认图表
            //
            $("button.addblock").hide();
        })
        //添加弹出框
        $("button.addpage").on("click",function(){
            $("#page_name").val("");
            $("#page_name_field").removeClass("error");
            $('#page_modal').modal({
                onApprove: function () {
                    if ($("#page_name").val()=="") {
                        $("#page_name_field").addClass("error");
                        return false;
                    } else {
                        //ajax,添加此页面绘制展示区，刷新展示页下拉框，注意判断重名
                    }
                }
            }).modal('setting', 'closable', false).modal('show');
        });
        //修改弹出框
        $("button.writepage").on("click",function(){
            var page_name=$("#viewpage_select").dropdown("get text");
            $("#page_name").val(page_name);
            $("#page_name_field").removeClass("error");
            $('#page_modal').modal({
                onApprove: function () {
                    if ($("#page_name").val()=="") {
                        $("#page_name_field").addClass("error");
                        return false;
                    } else {
                        //ajax,修改此页面绘制展示区，刷新展示页下拉框，注意判断重名
                    }
                }
            }).modal('setting', 'closable', false).modal('show');
        });
        //删除弹出框
        $("button.deletepage").on("click",function(){
            var group_name=$("#viewgroup_select").dropdown("get text");
            var page_name=$("#viewpage_select").dropdown("get text");
            $("#delete_modal").modal({
                onApprove: function () {
                    if (page_name == $("#viewpage_menu div:first").text()) {
                        alert("默认页面不能删除！")
                    } else {
                        //ajax,根据page_name删除此页面绘制展示区，刷新展示页下拉框，注意添加删除的刷新效果
                    }
                }
            }).modal('setting', 'closable', false).modal('show');
        });
        //编辑弹出框
        $("button.editpage").on("click",function(){
            $("button.addblock").show();
        });
        //刷新弹出框
        $("button.refreshpage").on("click",function(){
            alert("刷新成功！");
        });
        //保存页面弹出框
        $("button.savepage").on("click",function(){
            alert("保存成功！");
        });
        //改变下拉框
        $('#viewpage_select').dropdown({
            onChange: function (value) {
                //$('#viewpage_select').addClass('loading disabled');
                var group_name=$("#viewgroup_select").dropdown("get text");
                var page_name=$("#viewpage_select").dropdown("get text");
                //根据group_name、page_name绘制展示区域，注意绘制完后取消刷新动画效果
            }
        })
        //添加块
        $("button.addblock").on("click",function(){
            //ajax，覆盖point_modal中的数据
            $('#point_modal').modal('setting', 'closable', false).modal('show');
            //ajax，覆盖视图类型中的数据
            $('#point_view_modal').modal('attach events', '#point_modal .view.button');
            //ajax，覆盖图表类型中的数据
            $('#point_group_modal').modal({
                onApprove: function () {
                   //ajax选择菜单事件
                }
            }).modal('attach events', '#point_modal .group.button');
            //ajax，覆盖静态表格或时钟的数据
            $('#point_chart_modal').modal('attach events', '#point_modal .chart.button');
            ////绘制每一个块的位置
            //gridster.remove_all_widgets();
            $.each(serialization, function () {
                gridster.add_widget('<li />', this.size_x, this.size_y, this.col, this.row);
            });
        });
    </script>
</th:block>

</body>
</html>