<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>监控系统</title>
	<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
	<script src="../static/js/semantic.js"></script>
	<link rel="stylesheet" href="../static/css/semantic.css"  />
	<link rel="stylesheet" href="../static/css/icon.css"  />
	<link href="../static/css/ionicons.min.css" rel="stylesheet" />
	<link href="../static/css/main.css" rel="stylesheet" th:href="@{css/main.css}"/>
	<link href="../static/css/pace.css" rel="stylesheet" th:href="@{css/pace.css}"/>
	<link href="../static/css/lobibox.css" rel="stylesheet" th:href="@{css/lobibox.css}"/>
	<link rel="stylesheet" href="../static/css/jquery.treegrid.css">
	<!-- 引入 ajax异步请求，模拟服务器地址 -->
	<script src="http://rapapi.org/rap.plugin.js?projectId=19544&mode=3"></script>
</head>
<body>
<div id="contextWrap">
	<!--sidebar-->
	<div class="ui sidebar vertical left menu overlay  borderless visible sidemenu inverted  grey" data-color="grey"
		 th:replace="layout::left_menu">
		<a class="item logo" href="index.html">
			<img src="../static/images/logo.png" alt="stagblogo"/><img src="../static/images/thumblogo.png"
																	   alt="stagblogo" class="displaynone"/>
		</a>
		<div class="ui accordion inverted">
			<a class="title item" href="dashboard.html">
				<i class="ion-speedometer titleIcon icon"></i>仪表盘
			</a>
			<a class="title item" href="tab.html">
				<i class="ion-ios-lightbulb titleIcon icon"></i>监控视图
			</a>
			<a class="item" href="table.html">
				<i class="ion-ios-world titleIcon  icon"></i>业务概览
			</a>
			<div class="title item">
				<i class="ion-mouse titleIcon icon"></i>设备概览<i class="dropdown icon"></i>
			</div>
			<div class="content">
				<a class="item" href="tab.html">服务器</a>
				<a class="item" href="table.html">网络设备</a>
				<a class="item" href="error.html">数据库</a>
				<a class="item" href="login.html">应用</a>
			</div>
			<a class="title item" href="error.html">
				<i class="ion-arrow-graph-up-right titleIcon icon"></i>视图展示
			</a>
			<div class="title item">
				<i class="ion-paintbrush titleIcon icon"></i>告警展示<i class="dropdown icon"></i>
			</div>
			<div class="content">
				<a class="item" href="error.html">告警日历</a>
				<a class="item" href="error.html">告警列表</a>
			</div>
			<a class="title item" href="error.html">
				<i class="ion-briefcase titleIcon icon"></i>报表统计
			</a>
		</div>

		<div class="ui dropdown item displaynone scrolling">
			<span>仪表盘1</span>
			<i class="ion-speedometer icon"></i>
			<div class="menu">
				<div class="header">
					仪表盘1
				</div>
			</div>
		</div>

		<div class="ui dropdown item displaynone scrolling">
			<span>监控视图</span>
			<i class="ion-ios-lightbulb icon"></i>
			<div class="menu">
				<div class="header">
					监控视图
				</div>
			</div>
		</div>

		<div class="ui dropdown item displaynone scrolling">
			<span>业务概览</span>
			<i class="ion-ios-world icon"></i>
			<div class="menu">
				<div class="header">
					业务概览
				</div>
			</div>
		</div>

		<div class="ui dropdown item displaynone scrolling">
			<span>设备概览</span>
			<i class="ion-mouse icon"></i>
			<div class="menu">
				<div class="header">
					设备概览
				</div>
				<div class="ui divider"></div>
				<a class="item" href="tab.html">服务器</a>
				<a class="item" href="table.html">网络设备</a>
				<a class="item" href="error.html">数据库</a>
				<a class="item" href="login.html">应用</a>
			</div>
		</div>

		<div class="ui dropdown item displaynone scrolling">
			<span>视图展示</span>
			<i class="ion-arrow-graph-up-right icon"></i>
			<div class="menu">
				<div class="header">
					视图展示
				</div>
			</div>
		</div>

		<div class="ui dropdown item displaynone scrolling">
			<span>告警展示</span>
			<i class="ion-paintbrush icon"></i>
			<div class="menu">
				<div class="header">
					告警展示
				</div>
				<div class="ui divider"></div>
				<a class="item" href="error.html">告警日历</a>
				<a class="item" href="error.html">告警列表</a>
			</div>
		</div>

		<div class="ui dropdown item displaynone scrolling">
			<span>报表统计</span>
			<a href="error.html">
				<i class="ion-briefcase icon"></i>
			</a>
		</div>

		<div class="ui divider"></div>

	</div>

	<!--sidebar-->

	<div class="pusher">
		<!--navbar-->
		<div class="navslide navwrap" th:replace="layout::top_nav">
			<div class="ui menu icon borderless grid" data-color="inverted white">
				<a class="item labeled openbtn">
					<i class="ion-navicon-round big icon"></i>
				</a>
				<div class="item ui colhidden">
					<div class="ui icon input">
						<input type="text" placeholder="Search...">
						<i class="search icon"></i>
					</div>
				</div>
				<div class="right menu colhidden">
					<div class="ui dropdown item labeled icon">
						<i class="bell icon"></i> 告警
						<div class="ui red label mini circular">6</div>
						<div class="menu">
							<div class="header">
								紧急告警
							</div>
							<div class="item">
								告警信息1……
								<div class="ui teal left pointing label">1</div>
							</div>
							<div class="item">
								告警信息2……
								<div class="ui label">51</div>
							</div>
							<div class="item">
								告警信息3……
								<div class="ui label">1</div>
							</div>
							<div class="header">
								严重告警
							</div>
							<div class="item">
								<i class="dropdown icon"></i>
								<span class="text">更多</span>
								<div class="menu">
									<div class="item">告警信息……</div>
									<div class="item">告警信息……</div>
								</div>
							</div>
						</div>
					</div>
					<div class="ui dropdown item">
						<img class="ui mini circular image" src="../static/images/0.jpg" th:src="@{images/0.jpg}"
							 alt="label-image"/>
						<div class="menu">
							<a class="item" href="mail.html">注销</a>
						</div>
					</div>
					<a class="item labeled rightsidebar computer only">
						<i class="ion-wrench large icon"></i>工具
					</a>

				</div>
			</div>
		</div>
		<!--navbar-->
		<!--maincontent-->
		<div class="mainWrap navslide">
			<div class="ui equal width left aligned padded grid stackable">
				<!--Site Content-->
				<div class="sixteen wide tablet sixteen wide computer column">
					<div class="ui segments">
						<div class="ui segment">
							<h5 class="ui header">
								<i class="bar chart icon"></i>实时报告</h3>
							</h5>

							<div class="right">
								<p>检测总数：36个设备的222个监测点。
									<i class="red circle icon"></i>  30
									<i class="yellow circle icon"></i>  50
									<i class="green circle icon"></i>  122
									<i class="grey circle icon"></i>  20
								</p>
							</div>
						</div>
						<div class="ui segment">
							<table  class="tree ui very basic table">
								<thead>
								<tr>
									<th>监测点名称</th>
									<th>类型</th>
									<th>状态</th>
									<th>操作</th>
								</tr>
								</thead>
								<tbody id="server_list">
								<tr class="treegrid-1">
									<td>OA系统</td><td>业务系统</td><td>正常</td><td>操作1</td>
								</tr>
								<tr class="treegrid-11 treegrid-parent-1">
									<td>Node 1-1</td><td>业务系统</td><td>正常</td><td>操作1</td>
								</tr>
								<tr class="treegrid-12 treegrid-parent-1">
									<td>Node 1-2</td><td>业务系统</td><td>正常</td><td>操作1</td>
								</tr>
								<tr class="treegrid-2">
									<td>Node 1-2-1</td><td>业务系统</td><td>正常</td><td>操作1</td>
								</tr>
								<tr class="treegrid-21 treegrid-parent-2">
									<td>Node 1-2-1</td><td>业务系统</td><td>正常</td><td>操作1</td>
								</tr>
								</tbody>
							</table>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<script src="../static/js/js.cookie.js"></script>
<script src="../static/js/jquery.nicescroll.min.js"></script>
<script data-pace-options='{ "ajax": false }' src="../static/js/pace.js"></script>
<script src="../static/js/main.js"></script>
<script type="text/javascript" src="../static/js/jquery.treegrid.js"></script>
<script type="text/javascript">
    $(document).ready(function() {
        $('.tree').treegrid();
        $.ajax({
            type: "get",
            async: true,
            url: "/server/list",
            data: {},
            dataType: "json",
            success: function (result) {
                var data=result.data;
                var success=result.success;
                if(success) {
                    $("#server_list").html("");
                    for (var i in data) {
                        if (data[i]._parentId==0)
                        {
                            $("#server_list").append("<tr class=treegrid-" + data[i].hostId + "><td>" + data[i].name + "</td><td>" + data[i].type + "</td><td>" + data[i].state + "</td><td>" + data[i].button + "</td></tr>");
                        }
                        else {
                            $("#server_list").append("<tr class='treegrid-" + data[i].hostId + " treegrid-parent-" + data[i]._parentId +"'><td>" + data[i].name + "</td><td>" + data[i].type + "</td><td>" + data[i].state + "</td><td>" + data[i].button + "</td></tr>");
                            $('.tree').treegrid();
                        }
                    }
                }
                else {
                    Lobibox.notify("default", {
                        size: "normal",
                        rounded: false,
                        delayIndicator: true,
                        msg: "请求数据失败!",
                        icon: "comment icon",
                        title: "设备监控 List",
                    });
                }
            },
            error: function (errorMsg) {
                Lobibox.notify("error", {
                    size: "normal",
                    rounded: false,
                    delayIndicator: true,
                    msg: "请求链接失败!",
                    icon: "warning icon",
                    title: "设备监控 List",
                });
            }
        });
    });
</script>
</body>
</html>